# Electronic_Design_Competition
2024年全国大学生电子设计竞赛湖南赛区赛暨模拟电子系统设计专题赛初赛——AC-AC变换电路并联运行（A题）

一、前言

今年电赛已经是up第三次参加了，第一年电赛作为大一的小学弟，缺乏项目经验还不是很会，一开始打比赛的目的只是跟着学长学姐学东西。第二年电赛由于是23年国赛，因此指导老师和我们团队都是比较重视，我们花了一年的时间去为国赛做准备。期间我们从最简单的buck开始做起，然后再把基本的电力电子拓扑都做了一遍，包括全桥整流、全桥逆变、三相整流、三相逆变等等，并且做了并网（因为今年我们猜题便是并网方向）。在这期间的训练中，我们积累了很多项目及调试经验，也根据往年赛题，基本上把各个部分的硬件和软件都准备的十分充足。等到赛题一出，如我们猜题的方向一致，23年电赛的题目是单相逆变器并联运行系统并且需要进行并网，这些我们在平时的训练中都做过，唯独没有去做过并联系统，后面在今年的电赛也是栽在了这上面。题目出来后我们讨论的方案是使用dq解耦实现单相逆变器，然后发挥部分的并联系统采用主从控制，使用逆变器2去采集逆变器1的电压电流相位，相当于用逆变器2去并网逆变器1，然后再去进行真正并网。方案确认后我们在第一天晚上就将基础部分全部实现，并且指标十分可观，远超题目要求。然后去做发挥部分时我们便遇到了问题，由于组委会在后面补充说明了两个逆变器之间不能进行有线和无线通讯，因此给我们带来了较大的难题。后面我们放弃了主从控制方案，选择了不需要通讯的下垂控制。由于从来没做过此类方法，因此花了较多的时间去进行理解和实现。在并联时，系统的电流环流会倒灌进直流电源，因此总是会触发短路保护，由于现象有点吓人并且怕损坏电源，因此不怎么敢尝试，中间就一直卡在这一步，到最后一天晚上，我们硬着头皮联调，现象不对随时准备关电。最后在第四天下午也是成功将两个逆变器并联上，虽然效果不是很好，但是也算实现了功能，后面的电流分配和并网便没有多余时间去做了。因此下午便是测试和封箱，由于缺乏比赛经验，比较怕这怕那的，担心测试的时候评委不让手动操作，因此又在逆变器2输出加了一个继电器充当开关，软件延时去控制继电器导通。结果正是这一举动导致前面的努力白费，可能是由于上电时序不对，上电瞬间便把逆变器1给烧了，而且是在封箱之前出的问题，我们也没有多余的时间去解决问题，所以最终只保住了基础部分。最终结果便是基础部分拿满并且指标可观，但是结果还是省二无缘国赛。
  
怀着去年的遗憾我继续参加了今年的电赛，本来都不准备打了，但听说今年专题赛和省赛合并，可能也有机会参加国赛，便拉着队友继续参加，后来才知道这个国赛邀请赛和大多数人都没关系。今年的省赛我的心态比去年要好得多，因为去年带的22级大一队伍学习了一年也有一定的水平了，所以就让他们成为主力。不像去年23年国赛，带着一支大一队伍，所有的压力都是我们队伍抗，并且硬熬四天三夜，今年有队伍和我们分担压力，因此前两天我们都不熬夜，状态比去年好得多。今年的器件清单给了自耦调压器，就在所有人都在准备单相整流时，组委会又给了大家当头一棒。当题目出来的那刻所有人都傻眼了，要求实现一个AC-AC降压变换电路并且要并联，所以之前准备的东西都不大用的上了，只能说组委会出的题目越来越新颖了，在电赛所有的拓扑基本上考完的情况下，电赛题目今后会越来越难。题目要求实现的AC-AC变换电路网上的资料少的可怜，更别说有人做出实物来。我们的指导老师看了题目之后只想到了用矩阵变换器实现，但那个太复杂不太好做，后面问了我们的想法后便按照我们的方案做，后面便没再管过我们了，我估计今年我们老师应该是直接放弃了，但好在我们自己没放弃，最终实现了整个题目要求。今年整个比赛的过程实属不易，主电路硬件和软件都是从无到有，且时间上也是相对而言比较紧张，但好在比赛结束前成功封箱，最终也是获得了湖南省一等奖的好成绩。

下面附上作品的实物测试视频链接：

https://www.bilibili.com/video/BV1VtiueAEcK/?spm_id_from=333.999.0.0&vd_source=a0b00ddf466629a630c9f8aad4299f86

作品实物图片：

![4292c69c6455ec0243c205edc728475](https://github.com/user-attachments/assets/36f55c76-fea2-476e-906f-5be6fc68b310)

二、赛题分析

![image](https://github.com/user-attachments/assets/db31802e-9d39-4835-a166-e9b23019099e)
![image](https://github.com/user-attachments/assets/6b518bf3-7306-4c4a-bf92-d3e51214637f)
![image](https://github.com/user-attachments/assets/dc65bb75-87ff-4edf-af50-cfb426c7d72a)

24年电赛的题目与去年的国赛题目类似，都是需要制作两个变换器去进行并联，并且两个变换器之间不允许有线连接。题目难度较去年国赛要低，因此测试的时候要求指标便比较多。
AC-AC变换电路在以往接触和应用的比较少，并且题目已经明确禁止AC-DC-AC变换，而且这一块知识在网上可查找的文献也特别少，因此大多数人在看到题目的一刻便懵了，我们的指导老师看到题目后的第一时间也只想到了使用矩阵变换器去实现，但那种方法大大增加了系统难度，后通过查找论文资料，选择了网上呼声最高的也是最容易实现的Buck型AC-AC变换器拓扑。如图1所示。

![image](https://github.com/user-attachments/assets/c95ef64e-817a-4fcf-8408-ecbdfaaa4499)


整个电路拓扑是以同步整流Buck电路为原型，因此也可以直接按照Buck电路原理来进行电路分析。由于系统是AC-AC变换，因此在原有的MOS管支路中再串联一个MOS管实现双向导通，而两个串联的MOS管也可以等效为一个双向开关，最简单的实现方法就是按照同步整流Buck控制方法，对输出电压进行采样运算，对上下管施加互补PWM波，控制PWM波的占空比便可实现AC输出电压的调节，到此赛题基础部分便可轻松实现。
要实现发挥部分并联，最简单的方法便是制作两套相同的变换器，变换器1控制输出电压充当电压源，变换器2控制电流充当电流源。两路变换器都要采集输入电压进行极性判断，根据Buck型AC-AC变换器的控制原理，在极性判断时便同时完成锁相，由于输入是同一个电源，因此输出相位基本上不会相差太多，控制得当可以实现两路变换器的并联。我们只需保持变换器1输出电压不变，控制变换器2输出电流的大小便可完成电流分配。

三、硬件设计
1、工作原理分析

![image](https://github.com/user-attachments/assets/4378dd96-4083-4981-9132-5eec6a9c500b)

![image](https://github.com/user-attachments/assets/180844d7-df62-4e2a-8691-1f231372fd41)

Buck型AC-AC变换器如图3所示，Q1、Q2等效为一个双向开关S1，Q3、Q4等效为一个双向开关S2，S1、S2进行PWM调制工作，且驱动互补。

（1）工作模态1   如图3a所示，双向阻断开关S1导通，电感L的电流iL线性上升，双向阻断开关S2无电流通过。Q2的体二极管VDQ2不工作。此时电感电流iL>0；

（2）工作模态2   如图3b所示，双向阻断开关S1关断，电感电流iL从双向阻断开关S2续流，线性下降。Q3的体二极管VDQ3不工作。此时电感电流iL>0；

（3）工作模态3   如图3c所示，双向阻断开关S1导通，电感L的电流iL线性上升，双向阻断开关S2无电流通过。Q1的体二极管VDQ1不工作。此时电感电流iL<0；

（4）工作模态4   如图3d所示，双向阻断开关S1关断，电感电流iL从双向阻断开关S2续流，线性下降。Q4的体二极管VDQ4不工作。此时电感电流iL<0；

2、主要硬件设计

由于系统回路中都是交流电，没有固定的参考地平面，因此开关管的驱动便变得复杂。最简单的方法便是使用栅极隔离驱动芯片和隔离电源去驱动，可实现MOS的正常开通关断，网上也有非隔离的驱动方案可选，但那种方案实现更复杂。

MOS管的选型为威世的SUP85N10，漏源电压最大100V，最大电流可达85A，导通内阻10mΩ。栅极驱动芯片选择的是TI的UCC21520芯片，隔离式双通道栅极驱动器，具有4A峰值拉电流和6A峰值灌电流。每个驱动器可配置为两个低侧驱动器、两个高侧驱动器或一个死区时间 (DT) 可编程的半桥驱动器。禁用引脚在设为高电平时可同时关断两个输出，在保持开路或接地时允许器件正常运行。作为一种失效防护机制，初级侧逻辑故障会强制两个输出为低电平。

TI官方数据手册给的典型应用电路如图10-1所示。

![image](https://github.com/user-attachments/assets/8c750cac-52cf-4963-a7ff-68887de9acd8)

该应用电路是一个典型的半桥驱动电路，驱动部分我们可以直接照着手册的电路进行设计，但是应用的电路不一样，因此我们还需要进行一定的修改设计。修改后的电路如下图所示。

![image](https://github.com/user-attachments/assets/2a7421e6-3496-4343-b7d4-1ac0a0838b4f)

在电路设计上，我去掉了一些输入RC滤波等非必需器件，将DISABLE引脚直接接地使能芯片高低侧驱动。由于在驱动时序上，存在半个周期的时间高低管同时导通，因此我去掉了硬件RC死区时间设置，将DT引脚接地，防止芯片在高低侧同时导通时触发保护，内部逻辑互锁。在栅极驱动输出侧，UCC21520是隔离式双通道栅极驱动器，我可以用来同时驱动两个MOS管，由于我是同时驱动两个MOS管的双向开关电路而非半桥电路结构，因此高侧驱动便无需再使用自举电路，将两个MOS管源极相连进行串联，便可使用一个隔离电源同时驱动两个MOS管，减小电路功耗。

四、软件设计

在开关管的驱动信号上，可直接对Q1、Q2施加相同驱动信号，对Q3、Q4施加相同驱动信号，且两者驱动信号互补。但对驱动仔细分析可知，在输入电压Ui>0时，使Q1和Q3一直导通，在输入电压Ui＜0时， 使Q2和Q4一直导通，桥臂调制电压UM完全一致。因此我们可以将驱动信号简化为如下图所示。可以有效的降低开关损耗。

![image](https://github.com/user-attachments/assets/8abea1c0-7d50-496c-921a-b9741dfecb87)


